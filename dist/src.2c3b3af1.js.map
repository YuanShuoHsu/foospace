{"version":3,"sources":["src/database.json","src/index.js"],"names":["module","exports","products","name","price","_database","_interopRequireDefault","require","obj","__esModule","default","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","err","didErr","call","step","next","_e2","return","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","from","test","arr","len","arr2","checkout","_step","productIDs","arguments","undefined","database","cartItems","_iterator","id","_products$_id","push","discounts","index","item","cart","map","originalPrice","finalPrice","totalPrice","reduce","total","result","appContainer","document","getElementById","priceElement","concat","emptyLine","tableElement","_ref","join","innerHTML"],"mappings":"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","file":"src.2c3b3af1.js","sourceRoot":"..","sourcesContent":["module.exports={products:{\"001\":{name:\"Cola\",price:45},\"002\":{name:\"Royal\",price:50},\"003\":{name:\"Sprite\",price:55},\"004\":{name:\"Fanta\",price:60},\"005\":{name:\"Lemon Tea\",price:35}}};","import database from \"./database.json\";\n\nexport const checkout = (productIDs = []) => {\n  const products = database.products;\n  const cartItems = [];\n\n  for (const id of productIDs) {\n    const { name, price } = products[id];\n    cartItems.push({ id, name, price });\n  }\n\n  const discounts = {};\n  const threshold = 3;\n\n  for (let index = 0; index < cartItems.length; index++) {\n    const item = cartItems[index];\n    const { id } = item;\n\n    if (cartItems.length < threshold) {\n      if (discounts[id] === undefined) {\n        discounts[id] = index;\n      } else {\n        item.price *= 0.5;\n      }\n    } else {\n      if (discounts[id] === undefined) {\n        discounts[id] = index;\n        item.price -= 5;\n      } else if (discounts[id] !== -1) {\n        item.price *= 0.5;\n        cartItems[discounts[id]].price += 5;\n        discounts[id] = -1;\n      } else {\n        item.price -= 5;\n      }\n    }\n  }\n\n  const cart = cartItems.map((item, index) => ({\n    index: index + 1,\n    id: item.id,\n    name: item.name,\n    originalPrice: products[item.id].price,\n    finalPrice: item.price\n  }));\n\n  const totalPrice = cartItems.reduce((total, item) => total + item.price, 0);\n\n  return { cart, totalPrice };\n};\n\nconst result = checkout([\"003\", \"002\", \"003\", \"003\", \"004\"]);\n\nconst appContainer = document.getElementById(\"app\");\n\nconst priceElement = `<p>價格。以本範例為例，價格為：$${result.totalPrice}</p>`;\n\nconst emptyLine = \"<p>\\n</p>\";\n\nconst tableElement = `\n  <table style=\"text-align: center;\">\n    <thead>\n      <tr>\n        <th>#</th>\n        <th>ID</th>\n        <th>原價</th>\n        <th>活動價</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td colspan=\"4\">\n          ----------------------------------------------------\n        </td>\n      </tr>\n      ${result.cart\n        .map(\n          ({ index, id, originalPrice, finalPrice }) => `\n            <tr>\n              <td>${index}</td>\n              <td>${id}</td>\n              <td>${originalPrice}</td>\n              <td>${finalPrice}</td>\n            </tr>\n          `\n        )\n        .join(\"\")}\n    </tbody>\n  </table>\n`;\n\nif (appContainer) {\n  appContainer.innerHTML = priceElement + emptyLine + tableElement;\n}\n"]}