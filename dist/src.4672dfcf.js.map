{"version":3,"sources":["src/database.json","src/index.js"],"names":["module","exports","products","name","price","_database","_interopRequireDefault","require","obj","__esModule","default","checkout","productIDs","arguments","length","undefined","database","discounts","cartItems","map","id","index","_products$id","originalPrice","finalPrice","forEach","item","cart","totalPrice","reduce","total","result","appContainer","document","getElementById","priceElement","concat","emptyLine","tableElement","_ref","join","innerHTML"],"mappings":";AAAAA,OAAOC,QAAQ,CAACC,SAAS,CAAC,MAAM,CAACC,KAAK,OAAOC,MAAM,IAAI,MAAM,CAACD,KAAK,QAAQC,MAAM,IAAI,MAAM,CAACD,KAAK,SAASC,MAAM,IAAI,MAAM,CAACD,KAAK,QAAQC,MAAM,IAAI,MAAM,CAACD,KAAK,YAAYC,MAAM;;AC+FhL,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,cAAA,EA/FA,IAAAC,EAAAC,EAAAC,QAAA,oBAAuC,SAAAD,EAAAE,GAAAA,OAAAA,GAAAA,EAAAC,WAAAD,EAAAE,CAAAA,QAAAF,GAEhC,IAAMG,EAAW,WAAqB,IAApBC,EAAUC,UAAAC,OAAAD,QAAAE,IAAAF,UAAAE,GAAAF,UAAG,GAAA,GAC9BX,EAAWc,EAAQ,QAACd,SACpBe,EAAY,GAGZC,EAAYN,EAAWO,IAAI,SAACC,EAAIC,GACpC,IAAAC,EAAwBpB,EAASkB,GAAzBjB,EAAImB,EAAJnB,KAAMC,EAAKkB,EAALlB,MAEd,MAAO,CACLiB,MAAOA,EAAQ,EACfD,GAAAA,EACAjB,KAAAA,EACAoB,cAAenB,EACfoB,WAAYpB,KAgChB,OA5BIc,EAAUJ,OAdI,EAehBI,EAAUO,QAAQ,SAACC,EAAML,GACvB,IAAQD,EAAOM,EAAPN,QAEcL,IAAlBE,EAAUG,GACZH,EAAUG,GAAMC,EAEhBK,EAAKF,YAAc,KAIvBN,EAAUO,QAAQ,SAACC,EAAML,GACvB,IAAQD,EAAOM,EAAPN,GAER,QAAsBL,IAAlBE,EAAUG,GACZH,EAAUG,GAAMC,EAChBK,EAAKF,YAAc,OACd,IAAuB,IAAnBP,EAAUG,GAAY,CACRF,EAAUD,EAAUG,IAC5BI,YAAc,EAC7BE,EAAKF,YAAc,GACnBP,EAAUG,IAAO,OAEjBM,EAAKF,YAAc,IAKlB,CACLG,KAAMT,EACNU,WAAYV,EAAUW,OAAO,SAACC,EAAOJ,GAAI,OAAKI,EAAQJ,EAAKF,YAAY,KAEzEvB,QAAAU,SAAAA,EAEF,IAAMoB,EAASpB,EAAS,CAAC,MAAO,MAAO,MAAO,MAAO,QAE/CqB,EAAeC,SAASC,eAAe,OAEvCC,EAAYC,qBAAAA,OAAwBL,EAAOH,WAAgB,QAE3DS,EAAY,YAEZC,EAAYF,yUAAAA,OAgBVL,EAAOJ,KACNR,IACC,SAAAoB,GAAA,IAAGlB,EAAKkB,EAALlB,MAAOD,EAAEmB,EAAFnB,GAAIG,EAAagB,EAAbhB,cAAeC,EAAUe,EAAVf,WAAU,MAAAY,yCAAAA,OAE7Bf,EAAKe,6BAAAA,OACLhB,EAAEgB,6BAAAA,OACFb,EAAaa,6BAAAA,OACbZ,EAAU,0CAIrBgB,KAAK,IAGb,gCAEGR,IACFA,EAAaS,UAAYN,EAAeE,EAAYC","file":"src.4672dfcf.js","sourceRoot":"..","sourcesContent":["module.exports={products:{\"001\":{name:\"Cola\",price:45},\"002\":{name:\"Royal\",price:50},\"003\":{name:\"Sprite\",price:55},\"004\":{name:\"Fanta\",price:60},\"005\":{name:\"Lemon Tea\",price:35}}};","import database from \"./database.json\";\n\nexport const checkout = (productIDs = []) => {\n  const products = database.products;\n  const discounts = {};\n  const threshold = 3;\n\n  const cartItems = productIDs.map((id, index) => {\n    const { name, price } = products[id];\n\n    return {\n      index: index + 1,\n      id,\n      name,\n      originalPrice: price,\n      finalPrice: price,\n    };\n  });\n\n  if (cartItems.length < threshold) {\n    cartItems.forEach((item, index) => {\n      const { id } = item;\n\n      if (discounts[id] === undefined) {\n        discounts[id] = index;\n      } else {\n        item.finalPrice *= 0.5;\n      }\n    });\n  } else {\n    cartItems.forEach((item, index) => {\n      const { id } = item;\n\n      if (discounts[id] === undefined) {\n        discounts[id] = index;\n        item.finalPrice -= 5;\n      } else if (discounts[id] !== -1) {\n        const discountedItem = cartItems[discounts[id]];\n        discountedItem.finalPrice += 5;\n        item.finalPrice *= 0.5;\n        discounts[id] = -1;\n      } else {\n        item.finalPrice -= 5;\n      }\n    });\n  }\n\n  return {\n    cart: cartItems,\n    totalPrice: cartItems.reduce((total, item) => total + item.finalPrice, 0),\n  };\n};\n\nconst result = checkout([\"003\", \"002\", \"003\", \"003\", \"004\"]);\n\nconst appContainer = document.getElementById(\"app\");\n\nconst priceElement = `<p>價格。以本範例為例，價格為：$${result.totalPrice}</p>`;\n\nconst emptyLine = \"<p>\\n</p>\";\n\nconst tableElement = `\n  <table style=\"text-align: center;\">\n    <thead>\n      <tr>\n        <th>#</th>\n        <th>ID</th>\n        <th>原價</th>\n        <th>活動價</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td colspan=\"4\">\n          ----------------------------------------------------\n        </td>\n      </tr>\n      ${result.cart\n        .map(\n          ({ index, id, originalPrice, finalPrice }) => `\n            <tr>\n              <td>${index}</td>\n              <td>${id}</td>\n              <td>${originalPrice}</td>\n              <td>${finalPrice}</td>\n            </tr>\n          `\n        )\n        .join(\"\")}\n    </tbody>\n  </table>\n`;\n\nif (appContainer) {\n  appContainer.innerHTML = priceElement + emptyLine + tableElement;\n}\n"]}